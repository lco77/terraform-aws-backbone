{# templates/providers.tf.jinja2 #}
################################################################################
# This file is generated by "jinja.py"
################################################################################

{% for id,account in accounts.items() %} {% for region_code in account.regions %}
################################################################################
# {{ region_code }} | {{ account.name }} | {{ id }}
################################################################################

provider "aws" {
  region = "{{ regions[region_code] }}"
  alias  = "{{ region_code }}_{{ id }}"
  assume_role { role_arn = "arn:aws:iam::{{ id }}:role/{{ account.role }}" }
}
{% endfor %}{% endfor %}